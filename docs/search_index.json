[["index.html", "Miscellany Preface", " Miscellany Nicholas Lyu 2025-07-03 Preface Miscellaneous notes. "],["docker.html", "1 Docker 1.1 Basic commands 1.2 Dockerfile 1.3 Docker compose 1.4 Publishing images 1.5 Project in action", " 1 Docker Notes following full stack open’s docker chapter. Notes following full stack open’s docker chapter. 1.1 Basic commands Definition 1.1 (containers and images) A docker image is an immutable file (collection). A container is a running (and mutable) instance of an image. Container can be crystallized into containers. Running containers: docker container run hello-world Interactive mode: docker container run -it ubuntu bash. docker container run [OPTIONS] IMAGE [COMMAND] Remove after execution: docker container run --rm ubuntu ls . Run with name: docker container run -it --name [name] [doncainter name] [command] Run with binding: docker container run ... -v FILE-IN-HOST:FILE-IN-CONTAINER. Binds will be visible on both sides. Image ops: Listing: docker image ls Container operations: Listing: docker container ls -a (includes exited ones) Deleting: docker container rm [ID prefix]. Starting an initialized container: docker start [container name] Start with \\(-it\\) to create a binding, interactive process Kill main process of running container: docker kill [container] Create additional connection: docker exec -it [name] /bin/bash. Committing &amp; manipulation: docker commit CONTAINER-ID-OR-CONTAINER-NAME NEW-IMAGE-NAME Copy: docker container cp [local path] [image-name]:[container path] Sample docker image: pytorch/pytorch:2.7.0-cuda11.8-cudnn9-devel Sample workflow docker container ls -a docker image ls -a docker container run -it --gpus all --name gpu_starter pytorch/pytorch:2.7.0-cuda11.8-cudnn9-devel docker start gpu_starter docker attach docker exec -it gpu_starter /bin/bash docker kill gpu_starter docker container cp 01-docker.Rmd gpu_starter:/workspace 1.2 Dockerfile Dockerfile defines the workflow for building an image. Sample dockerfile: FROM pytorch/pytorch:2.7.0-cuda11.8-cudnn9-devel COPY ./simple.py /workspace CMD python /workspace/simple.py Where simple.py Run in the dockerfile folder: docker build . -t gpu_starter Running: docker container run --gpus all --name gpu -p 8888:8888 --rm -it gpu_starter 1.3 Docker compose Note that the workflow above still involves (1) using the Dockerfile to build an image, and (2) running the image with specified parameters. The second can be automated by docker compose. Equivalent specification in docker-compose.yml: services: app: image: pytorch/pytorch:2.7.0-cuda11.8-cudnn9-devel build: . stdin_open: true tty: true ports: - 8888:8888 gpus: all volumes: - ~/Downloads:/workspace/downloads Running docker compose up --build will create the image and Images are retained. Remove by docker compose down --rmi all Use docker compose up --build -d to detach after building Compose up will also automatically create containers. Use docker compose down to remove all containers for compose services. Run docker container ls -a and docker attach [container] to interact 1.4 Publishing images To publish, run docker login docker tag sample_image:latest nlyu1/sample_image:latest docker push nlyu1/sample_image:latest To pull from elsewhere, run docker pull nlyu1/sample_image:latest. 1.5 Project in action "],["bibliography.html", "Bibliography", " Bibliography "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
